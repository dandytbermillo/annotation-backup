LLM-ready patch (Insert lines before fuzzy query)

Target file: app/api/search/route.ts

Find this marker inside GET handler:
  // Fuzzy search using trigrams for better typo tolerance
  if (type === 'fuzzy') {

Immediately after the opening brace, insert:
    // Set session threshold for trigram similarity to stabilize results
    const raw = searchParams.get('similarity')
    let threshold = Number(raw)
    if (!Number.isFinite(threshold)) threshold = 0.45
    threshold = Math.min(1, Math.max(0, threshold))
    await pool.query('SELECT set_limit($1)', [threshold])

Optional: include threshold in response object if you want visibility.
