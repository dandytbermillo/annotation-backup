# Plan: Preview-Aware Chat Shortcuts (Show All / View Full List)

## Goal
When the chat shows a preview list with a "Show all" button, let the user type a follow‑up like "show all" or "open full list" and open the same view panel without relying on the LLM.

## Scope
- Applies to preview lists rendered in the chat: Quick Links, Recent, Workspaces, etc.
- Covers follow‑ups like:
  - "show all"
  - "show all items"
  - "open full list"
  - "view everything"
  - "show all 14 items"

## Non‑Goals
- Do not infer unrelated intents.
- Do not fetch new data from the LLM.
- Do not change how the view panel is rendered.

## Core Idea
Treat “show all” as a **local UI command** when the most recent chat message contains preview items and a known view‑panel payload.

## Data to Store (Client)
When rendering a preview message, store a lightweight reference in state:
```
lastPreview = {
  source: 'quick_links' | 'recent' | 'workspaces' | 'search' | 'other',
  viewPanelContent: ViewPanelContent, // already generated by resolver
  totalCount: number,
  messageId: string,
  createdAt: number,
}
```

## Matching Rules (Client‑Side)
Intercept input before calling the LLM:
- If user input matches any of these patterns:
  - /^show all( items)?/i
  - /^open (the )?(full|complete) list/i
  - /^view (all|everything)/i
  - /^show all \d+ items/i
- AND `lastPreview` exists and is recent (e.g., within last 2 minutes),
  → open the view panel directly with `lastPreview.viewPanelContent` and return a local confirmation.

## Behavior
- If lastPreview exists: open view panel immediately (same as clicking “Show all”).
- If no lastPreview: respond with a short clarification:
  “Which list do you want to show — Quick Links, Recent, or Workspaces?”

## Safety Rules
- Only trigger on the explicit “show all / open full list” patterns.
- Do not override explicit commands (e.g., “open workspace X”).
- Do not send to LLM when a local preview shortcut is matched.

## Implementation Steps
1) In chat panel state, store `lastPreview` when rendering MessageResultPreview.
2) Add input interceptor before LLM call:
   - Detect “show all” patterns
   - If `lastPreview` exists → `openPanel(lastPreview.viewPanelContent)`
3) Provide a small confirmation message in chat (optional):
   - “Opening full list for Quick Links C.”

## Testing Checklist
- Show quick links → chat shows preview → type “show all” → view panel opens.
- Show quick links → type “open full list” → view panel opens.
- No preview shown → type “show all” → clarification message.
- Preview for Recent → “show all” opens the Recent view.
- Explicit command still works: “open workspace 4” goes to workspace.

## Rollback
- Remove input interceptor and lastPreview state; revert to LLM‑only.

## Success Criteria
- “show all” reliably opens the correct view panel after a preview is shown.
- No extra LLM calls for preview expansions.
- No regressions in normal navigation intents.
